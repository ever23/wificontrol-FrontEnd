//var audio = new Audio('./audio/beep.mp3');
console.log('Service Worker Works');

self.addEventListener('push', e => {
    const data = e.data.json();
  console.log(self)
    self.registration.showNotification(data.title, {
        body: data.message,
        icon: 'data:image/png;base64,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'
    });
});

self.addEventListener('notificationclick', function(event) {
  console.log('On notification click: ', event.notification.tag);
  event.notification.close();
  // This looks to see if the current is already open and
  // focuses if it is
  event.waitUntil(clients.matchAll({
    type: "window"
  }).then(function(clientList) {
    for (var i = 0; i < clientList.length; i++) {
      var client = clientList[i];
      if (client.url == '/' && 'focus' in client)
        return client.focus();
    }
    if (clients.openWindow)
      return clients.openWindow('/');
  }));
});